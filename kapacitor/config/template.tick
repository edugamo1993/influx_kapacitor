stream
  |from()
    .measurement('cpu')
    .groupBy(*)
  |window()
        .period(10s)
        .every(10s)
  |alert()
    .info(lambda: "value" > 60)
    .infoReset(lambda: "value" < 50)
    .warn(lambda: "value" > 70)
    .warnReset(lambda: "value" < 60)
    .crit(lambda: "value" > 80)
    .critReset(lambda: "value" < 70)
    .message('{"status": "{{ .Level}}", "reason" : "CPU is on fire !! :fire:  {{ index .Fields "value" }}  %"}')
    .log('/tmp/alerts.log')
    .slack()
